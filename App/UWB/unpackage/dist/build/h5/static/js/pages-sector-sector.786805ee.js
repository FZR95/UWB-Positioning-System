(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sector-sector"],{"064b":function(t,i,e){"use strict";e.r(i);var a=e("8bfd"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},"0f99":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABnElEQVR4Xu3ZXa6CMBCGYbtI3QZhJYRt6CJrelFzrBT6M/N15nS8MVEIvA9TScTdJn+5yftvBmATMLmALYHJB8B+BG0J2BKYXMCWwOQDYHcBWwK5JbCu63Pbtsd/WCJnLYcTEHbw3t+dcy/tCFctPwBxh3jlNSOUtHwBpDtoRiht+QJYliWM/fNo3WuahFx86PLeP/Z9f30ubhqrHaEmPrQf/ghqRaiNzwKEL7QhtMSfAmhCaI2/BNCA0BNfBCAZoTe+GEAiAkV8FYAkBKr4agAJCJTxTQAjEajjmwFGIHDEdwEgEbjiuwEQCJzxJACcCNzxZAAcCIh4UgBKBFQ8OQAFAjKeBaAHAR3PBtCCMCKeFaAGYVQ8O0AJQtgmPIMI7+kr/QPzaJvezyCPxs7+XssFIOIhExADaxBQ8VCAq+UQoZDxcIArBHT8EIAcwoj4YQApwqj4oQARIbz/fVbXe1ur3R9yG6w9KeT2BoDUlngsmwCJVwV5TjYBSG2Jx7IJkHhVkOdkE4DUlngsmwCJVwV5TjYBSG2Jx5p+At4/88hQbA/sVQAAAABJRU5ErkJggg=="},1590:function(t,i,e){var a=e("6939");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("a0adb880",a,!0,{sourceMap:!1,shadowMode:!1})},"675e":function(t,i,e){"use strict";var a=e("1590"),n=e.n(a);n.a},6939:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".content[data-v-3e2fb13b]{padding:0 %?20?%}.header[data-v-3e2fb13b]{margin-left:%?10?%;margin-right:%?10?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:#c8c7cc %?3?% solid}.emergent[data-v-3e2fb13b]{background:#eb3349;  /* fallback for old browsers */background:-webkit-linear-gradient(270deg,#f45c43,#eb3349);  /* Chrome 10-25, Safari 5.1-6 */background:-webkit-linear-gradient(right,#f45c43,#eb3349);background:linear-gradient(270deg,#f45c43,#eb3349) /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */}.reversed[data-v-3e2fb13b]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.header uni-image[data-v-3e2fb13b]{width:%?40?%;height:%?40?%}.title[data-v-3e2fb13b]{background:#aaffa9;\r\n\t/* fallback for old browsers */background:-webkit-linear-gradient(90deg,#11ffbd,#aaffa9);\r\n\t/* Chrome 10-25, Safari 5.1-6 */background:-webkit-linear-gradient(left,#11ffbd,#aaffa9);background:linear-gradient(90deg,#11ffbd,#aaffa9);\r\n\t/* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */margin-top:%?20?%;padding:%?20?%;font-weight:700}.header_text[data-v-3e2fb13b]{line-height:%?100?%;font-weight:400}.header_status[data-v-3e2fb13b]{display:-webkit-box;display:-webkit-flex;display:flex;justify-self:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.sector[data-v-3e2fb13b]{margin-bottom:%?20?%}.sector_title[data-v-3e2fb13b]{padding-left:%?10?%;font-weight:600;line-height:%?80?%;border-bottom:#3498db %?8?% solid;color:#000;margin-bottom:%?20?%}.info[data-v-3e2fb13b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background-color:#f8f8f8;border-radius:%?10?%;margin-bottom:%?20?%;padding:%?10?% %?20?%;font-weight:300}.info_header[data-v-3e2fb13b]{line-height:%?40?%;font-weight:500;border-bottom:#fff %?4?% solid;margin-bottom:%?20?%;padding:%?10?% 0}.optheader[data-v-3e2fb13b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.optheader .opt[data-v-3e2fb13b]{font-weight:400;font-size:small}.optheader uni-switch[data-v-3e2fb13b]{-webkit-transform:scale(.5);transform:scale(.5)}.uwbmap[data-v-3e2fb13b]{margin_bottom:%?20?%;margin-left:auto;margin-right:auto}",""]),t.exports=i},"8bfd":function(t,i,e){"use strict";(function(t){e("cb29"),e("ac1f"),e("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{sections:[{name:"区域A",is_sector_fold:!0,status:"OFFLINE",emergent:!1},{name:"区域B",is_sector_fold:!0,status:"OFFLINE",emergent:!1},{name:"区域C",is_sector_fold:!0,status:"OFFLINE",emergent:!0}],status:"OFFLINE",online:!1,uwbmap_style:"",uwbmap_update:!1,uwbmap_track:!0,uwbmap_interval:"",information:{},mapinfo:{},tagpos:[],anchorpos:[]}},methods:{sector_fold:function(t){this.is_sector_fold[t]=!this.is_sector_fold[t]},canvas_map_draw:function(){var t={anchor_num:3,tag_num:4,anchor_font_size:15,anchor_radius:15,anchor_stroke:5,tag_font_size:8,tag_radius:8,tag_stroke:5},i=uni.createCanvasContext("uwbmap");i.setStrokeStyle("black"),i.setLineWidth(1),i.rect(this.anchorpos[0].x*this.mapinfo.ratio_width+t.anchor_radius+t.anchor_stroke,this.anchorpos[0].y*this.mapinfo.ratio_height+t.anchor_radius+t.anchor_stroke,this.mapinfo.canvas_width,this.mapinfo.canvas_height),i.stroke(),i.draw(this.uwbmap_track);for(var e=0;e<t.anchor_num;e++)i.setFillStyle("#f1c40f"),i.setStrokeStyle("black"),i.setLineWidth(t.anchor_stroke-4),i.arc(this.anchorpos[e].x*this.mapinfo.ratio_width+t.anchor_radius+t.anchor_stroke,this.anchorpos[e].y*this.mapinfo.ratio_height+t.anchor_radius+t.anchor_stroke,t.anchor_radius,0,2*Math.PI),i.fill(),i.stroke(),i.draw(!0),i.setFillStyle("black"),i.setFontSize(t.anchor_font_size),i.fillText(this.anchorpos[e].name,this.anchorpos[e].x*this.mapinfo.ratio_width+t.anchor_radius+t.anchor_stroke-t.anchor_font_size/1.5,this.anchorpos[e].y*this.mapinfo.ratio_height+t.anchor_radius+t.anchor_stroke+t.anchor_font_size/3),i.draw(!0);for(var a=0;a<t.tag_num;a++)i.setFillStyle("#2ecc71"),i.arc(this.tagpos[a].x*this.mapinfo.ratio_width+t.tag_radius+t.tag_stroke,this.tagpos[a].y*this.mapinfo.ratio_height+t.tag_radius+t.tag_stroke,t.tag_radius,0,2*Math.PI),i.fill(),i.draw(!0),i.setFillStyle("black"),i.setFontSize(t.tag_font_size),i.fillText(this.tagpos[a].name,this.tagpos[a].x*this.mapinfo.ratio_width+ +t.tag_radius+t.tag_stroke-t.tag_font_size/1.5,this.tagpos[a].y*this.mapinfo.ratio_height+t.tag_radius+t.tag_stroke+t.tag_font_size/3),i.draw(!0)},canvas_map:function(){var t,i;uni.getSystemInfo({success:function(e){t=e.windowWidth-20,i=.6*e.windowHeight}}),this.uwbmap_style="width:"+t+"px;height:"+i+"px;",this.mapinfo.canvas_width=.85*t,this.mapinfo.canvas_height=.85*i,this.mapinfo.ratio_width=this.mapinfo.canvas_width/this.mapinfo.width,this.mapinfo.ratio_height=this.mapinfo.canvas_height/this.mapinfo.height,this.canvas_map_draw()},IOT_init:function(){this.IOT_check_status()},IOT_check_status:function(){var i=this,e=this;t.callFunction({name:"IOT_GetDeviceStatus",success:function(t){e.status=t.result,i.online="ONLINE"==i.status,i.IOT_get_property()}})},IOT_get_property:function(){var i=this;t.callFunction({name:"IOT_QueryDevicePropertyStatus",success:function(t){console.log(t);for(var e,a,n=t.result,o=0;o<n.length;o++)n[o].Time=i.timestampToTime(n[o].Time),"anchorpos"==n[o].Identifier&&(e=n[o].Value.split(";")),"tagpos"==n[o].Identifier&&(a=n[o].Value.split(";"));i.information=n;for(var s=0;s<e.length;s++){var r={},c=e[s].split(":");r.name=c[0],r.x=c[1].split(",")[0],r.y=c[1].split(",")[1],r.z=c[1].split(",")[2],i.anchorpos[s]=r}for(var f=0;f<a.length;f++){var l={},u=a[f].split(":");l.name=u[0],l.x=u[1].split(",")[0],l.y=u[1].split(",")[1],i.tagpos[f]=l}i.mapinfo.width=i.anchorpos[1].x-i.anchorpos[0].x,i.mapinfo.height=i.anchorpos[2].y-i.anchorpos[0].y,i.canvas_map()}})},timestampToTime:function(t){var i=new Date(1*t),e=i.getFullYear()+"-",a=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",n=(i.getDate()<10?"0"+i.getDate():i.getDate())+" ",o=(i.getHours()<10?"0"+i.getHours():i.getHours())+":",s=(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())+":",r=i.getSeconds();return e+a+n+o+s+r},uwbmap_switch_track:function(t){this.uwbmap_track=!this.uwbmap_track},uwbmap_switch_update:function(t){this.uwbmap_update=!this.uwbmap_update,this.uwbmap_update?this.uwbmap_interval=setInterval(this.IOT_check_status,1e3):clearInterval(this.uwbmap_interval)},go_log:function(t){"tagpos"==t&&uni.navigateTo({url:"../log/log"})}},onShow:function(){this.IOT_init()},onLoad:function(t){this.is_sector_fold[0]=!1,this.is_sector_fold[1]=!1,this.is_sector_fold[2]=!1,t.log||uni.navigateTo({url:"../index/index"})}};i.default=a}).call(this,e("a9ff")["default"])},a73f:function(t,i,e){"use strict";e.r(i);var a=e("d28b4"),n=e("064b");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("675e");var s,r=e("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"3e2fb13b",null,!1,a["a"],s);i["default"]=c.exports},cb29:function(t,i,e){var a=e("23e7"),n=e("81d5"),o=e("44d2");a({target:"Array",proto:!0},{fill:n}),o("fill")},d28b4:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"content"},t._l(t.sections,(function(i,n){return a("v-uni-view",{key:n},[a("v-uni-view",{staticClass:"header sector",class:{emergent:i.emergent}},[a("v-uni-view",{staticClass:"header_text",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.IOT_init()}}},[t._v(t._s(i.name))]),a("v-uni-view",{staticClass:"header_status"},[a("svg",{attrs:{height:"20px",width:"20px"}},[t.online?a("circle",{attrs:{cx:"10",cy:"10",r:"8",fill:"#2ecc71"}}):a("circle",{attrs:{cx:"10",cy:"10",r:"8",fill:"#e74c3c"}})]),t._v(t._s(t.status)),a("v-uni-image",{staticStyle:{width:"30rpx",height:"30rpx","margin-left":"20rpx"},attrs:{src:e("f2c8")}})],1),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),i.is_sector_fold=!i.is_sector_fold}}},[i.is_sector_fold?t._e():a("v-uni-image",{attrs:{src:e("0f99")}}),i.is_sector_fold?a("v-uni-image",{staticClass:"reversed",attrs:{src:e("0f99")}}):t._e()],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:i.is_sector_fold,expression:"SEC.is_sector_fold"}]},[t.online?a("v-uni-view",{staticClass:"uwbmap"},[a("v-uni-view",{staticClass:"sector_title optheader"},[a("v-uni-view",[t._v("地图")]),a("v-uni-view",{staticClass:"opt"},[t._v("实时更新"),a("v-uni-switch",{attrs:{checked:t.uwbmap_update,color:"#2ecc71"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.uwbmap_switch_update.apply(void 0,arguments)}}}),t._v("显示轨迹"),a("v-uni-switch",{attrs:{checked:t.uwbmap_track,color:"#2ecc71"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.uwbmap_switch_track.apply(void 0,arguments)}}})],1)],1),a("v-uni-canvas",{style:t.uwbmap_style,attrs:{"canvas-id":"uwbmap",id:"uwbmap"}}),a("v-uni-view",{staticClass:"map_info"},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"info_header"},[t._v("标签坐标(cm)")]),a("v-uni-view",{staticClass:"info_content"},t._l(t.tagpos,(function(i,e){return a("v-uni-view",{key:e},[t._v(t._s(i.name)+":"+t._s(i.x)+", "+t._s(i.y))])})),1)],1),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"info_header"},[t._v("地图信息")]),a("v-uni-view",{staticClass:"info_content"},[t._v("地图宽度："+t._s(t.mapinfo.width/100)+"m"),a("br"),t._v("地图高度："+t._s(t.mapinfo.height/100)+"m")])],1),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"info_header"},[t._v("基站坐标(cm)")]),a("v-uni-view",{staticClass:"info_content"},t._l(t.anchorpos,(function(i,e){return a("v-uni-view",{key:e},[t._v(t._s(i.name)+":"+t._s(i.x)+", "+t._s(i.y)+", "+t._s(i.z))])})),1)],1)],1)],1):t._e(),t.online?a("v-uni-view",{staticClass:"information sector"},[a("v-uni-view",{staticClass:"sector_title"},[t._v("设备属性")]),t._l(t.information,(function(i,e){return a("v-uni-view",{key:e,staticClass:"info",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go_log(i.Identifier)}}},[a("v-uni-view",{staticClass:"info_header"},[t._v("属性名："+t._s(i.Identifier))]),a("v-uni-view",{staticClass:"info_content"},[t._v("属性值："+t._s(i.Value))]),a("v-uni-view",{staticClass:"info_time"},[t._v("上传时间："+t._s(i.Time))])],1)}))],2):t._e()],1)],1)})),1)},o=[]},f2c8:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHaklEQVR4Xu2bCYgcVRBAq/5sPMEEdeOxHgge4IlGjUq8xduo6HoLEQyIcfr/Xka8QfEE3en6O2ggKh5ovFA0nlGMwVsTRQXFG40nXjG6KEymp6TibOjt/T3TMz2zOyEpGBZ26tevev2vqfqNsJYLruXxwzoA60bAWk5gQqaA7/sb5nK5Lcvl8lbM/O+kSZN+Gx4e/n3evHn/jPfz6DiAgYGBncMwPAkRTwSArQBgSwCYnBDobwDwmXwQcQkzP0VEP3USSkcAGGP2AYCTAOA4AJieMYCnEfE5ALgvCIJ/M9oa07ytAPL5/Da5XE4josfM67XZ2c8B4P4wDEulUumvdtluC4D+/v71+vr6PADQALBNu5xLsLOUma+21i5s1I8x5jAiWlxPLzMArfV0RLwDAGTYp5FlALCMmVf9RcTNAWBHANgJAPrSGKjpXEtE17n0jTGnMPNliHgAADxZrVYfGRoaetilmwmA1nomIj5Vz2lm/lEptaharS6w1j5WT1d2h2q1upNS6hBmPgcADmwAZCEiXh0EwdKonjEmAAAz8j9mfsFaK+tR+9YAY0weAIbqOLiYmQNr7YImnuoo1YGBgb2q1eppiHgaM++aYOcvZj4/2o8xhuO6ROR82C2NAGOMrMpOosz8lVKqGASBTIu2iTHmVgAoJBj8Wyl1bLFYfFO+7ygAY8w9ADArwZFSGIbXl0qlX9sWecSQMeZ8ABAQWzjsL1NKzSgWi991DIAx5goAuMkVHDOfZa19pBOBR21qrfdERIFwtKOvD4ho744A0Fofg4gvuAJUSm0n5DsdfNS+7/uPMnO/o89FAHBEW9eA2j7/lmurY+a9rLUfjWfwI33VgTDGnUyLoDFGFh8ZdqOEmW+w1l4zEcE3C6FlALXjrTz9+AnvXiK6YLyD11r3I+KoLRERd0uYDqvdaxmAa/uRra5arR7YqdU+Caox5hUAOKwV6C0BkF91iPhW/IcNIs5p9z7fKCg51wOAAGhJWgLg+/6VzHxjrMfFRHR4S15kaJQRwKrt0dV93ZOga8gx88lZjrcZGMgJr5Up8KMs4ERETQEoFAo7VCqVr2ONlhHR9lmCyNrWtQg2sHkfEX2TpJM4Anzfv5iZb481nEtEF2cNopvaJwJIGG4nEtGz3RRAVl/qAfgUAHaJdpC0kmZ1YiLb1wPwZyx7O+HzvxOgnAAkM8PM8Rz960R0cCec6ITN2rZ5KAC8SERyknWKE4BrB2Dm+dbaczvhbLtt+r5/OTPfPGIXEQeCIJA02RhxAvA87yCl1BtRbWa+xVor+YCuF2PMDwCwdcTR74lo29QAakmHD2MA7rDWzun26AuFwsaVSmU45ucfRLRZagD5fL43l8v9EmuwgIhO7nYAxhgpv8npLyofE9HuqQGIojGmAgC5SKP3iWhatwPQWu+CiLKFrxZEfDkIgqOaBfB9rFDxKxFNXQMA7IeI78b8fJCIzmsWwBIA2DfaKJfL9Q4ODkoFt2vF9/0zmHlUcpaZB621zpR64kFIaz0XES+KRTqbiO7q2uj/n7pPAkB8rTqPiB5sagR4nnesUur52Fx6JggCKXt3peTz+U2UUj8h4kYxvzcLguCPpgDMmjVrgylTpvwOAKOMhWG4Y6lU+qobCdQKJ/fHfKubwKmbENFaP4SIZ0UNdkMmOAm+7/vPMvPxMX+vstY6izmiVxeA53kXKaXmxobT8jAMpw8NDX3RTaNAa30mIo4pgSPifvHq8ah46gVRKBSmrly58m1E3CGmZ4lodfm5G0BorV9DxBmxp/+4tfb0ev41rA77vq+ZOZ5PCwFgfyJ6v0uCn42I8+K+IOIhQRC8lgmANDbGvO247PQeEY06J0wEDM/zZiilXEGmSt81HAE1AGcDwHxHgIuI6MiJCFz69DxvO6XUt44nv1wKN9ZauXJXV1IBEAta6ycQ8VSHtRIRyQWpcRdXGbzmROL9oTGw0nrt+34fM0uOwJUWl7S7n9ZWVj3Xz/WIzduI6NK0faQeAbWpkFieQsQHKpXKnHbe4XMFUasLPOr6DhEfC4LgjLTBi15TAGoQLgSAOxM6kTridWnu8DXj5Iiu1tq52te+T8z61OuraQA1CHVviDHz3T09PcXBwcFPWgk03kYOOQBwSXyfj+glZnwa9d8SgNqiKBckZXtMErnOWmTmV6y1rzZyJP697/ubMvNxiHhO/Hgb032HiORCZEvSMgDpTbLHYRjeycyNtsIvmflFmaNhGK7o6elZUS6XV/T29q4YHh5eXyk1uVwuT5a/YRjugYgnAIB8ehpElZjoSEsjE4AaBElCyklR1oZxEURczsxyHHdelW3GicwARjozxsjNLLksPbMZB1rQnSvBpznkpLHdNgAREHJqFBBZ3xMY5T8zP66Uso3O9mmCjuq0HUAEhFylHfnIbfCmRV6UYOaXAECSGh80bSBFg44BiPbted40pVT0lRl5bWbk9RkpYkga62dmXvUBgCWIuJCIpEDbURkXAB2NIKPxdQAyAlzjm68bAWv8I8wYwFo/Av4DLDbzX8bK0qsAAAAASUVORK5CYII="}}]);